<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <title>–≠–ª–∏–∞—Å ‚Äî –ö–æ–º–∞–Ω–¥–Ω–∞—è –∏–≥—Ä–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background-color: var(--tg-theme-bg-color, #ffffff);
      color: var(--tg-theme-text-color, #000000);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .screen {
      display: none;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .active {
      display: flex;
    }

    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      background: #2AABEE;
      color: white;
      cursor: pointer;
    }

    .word {
      font-size: 32px;
      margin: 20px 0;
    }

    .scoreboard {
      margin-top: 10px;
      font-size: 18px;
    }

    .timer {
      font-size: 20px;
      margin-bottom: 10px;
    }
  </style>
</head>

<body>
  <div class="screen active" id="start-screen">
    <h1>–≠–ª–∏–∞—Å</h1>
    <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—á–Ω—ë—Ç –∏–≥—Ä—É</p>
    <button onclick="chooseTeam(1)">–ö–æ–º–∞–Ω–¥–∞ 1</button>
    <button onclick="chooseTeam(2)">–ö–æ–º–∞–Ω–¥–∞ 2</button>
  </div>

  <div class="screen" id="game-screen">
    <div class="timer" id="timer-display">60</div>
    <div class="word" id="word-display">–°–ª–æ–≤–æ</div>
    <button onclick="nextWord(true)">–£–≥–∞–¥–∞–ª–∏ ‚úÖ</button>
    <button onclick="nextWord(false)">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å üîÑ</button>
    <div class="scoreboard">
      –ö–æ–º–∞–Ω–¥–∞ 1: <span id="score1">0</span> | –ö–æ–º–∞–Ω–¥–∞ 2: <span id="score2">0</span>
    </div>
  </div>

  <div class="screen" id="turn-screen">
    <h2>–ü–µ—Ä–µ–¥–∞–π—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω</h2>
    <p>–•–æ–¥ –ö–æ–º–∞–Ω–¥—ã <span id="next-team"></span></p>
    <button onclick="startTurn()">–ò–≥—Ä–∞—Ç—å</button>
  </div>

  <div class="screen" id="end-screen">
    <h2>–ü–æ–±–µ–¥–∞!</h2>
    <p>–í—ã–∏–≥—Ä–∞–ª–∞ –ö–æ–º–∞–Ω–¥–∞ <span id="winner"></span> üéâ</p>
    <button onclick="restartGame()">–°—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑</button>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    const words = ["–ö–æ—Ç", "–°–∞–º–æ–ª—ë—Ç", "–û—á–∫–∏", "–ü–ª—è–∂", "–ì–∏—Ç–∞—Ä–∞", "–¢–µ–ª–µ–≤–∏–∑–æ—Ä", "–ü–∏—Ü—Ü–∞", "–ú–∞—à–∏–Ω–∞", "–°–Ω–µ–≥–æ–≤–∏–∫", "–û–≥—É—Ä–µ—Ü"];
    let currentWordIndex = 0;
    let score1 = 0;
    let score2 = 0;
    let currentTeam = 1;
    let timer;
    let countdown = 60;

    function showScreen(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function chooseTeam(team) {
      currentTeam = team;
      shuffleWords();
      showScreen('game-screen');
      showWord();
      startTimer();
      updateScoreboard();
    }

    function showWord() {
      document.getElementById('word-display').textContent = words[currentWordIndex];
    }

    function nextWord(correct) {
      if (correct) {
        if (currentTeam === 1) score1++;
        else score2++;
        checkWinner();
      }
      currentWordIndex++;
      if (currentWordIndex >= words.length) {
        shuffleWords();
        currentWordIndex = 0;
      }
      showWord();
      updateScoreboard();
    }

    function updateScoreboard() {
      document.getElementById('score1').textContent = score1;
      document.getElementById('score2').textContent = score2;
    }

    function startTimer() {
      countdown = 60;
      document.getElementById('timer-display').textContent = countdown;
      timer = setInterval(() => {
        countdown--;
        document.getElementById('timer-display').textContent = countdown;
        if (countdown <= 0) {
          clearInterval(timer);
          changeTurn();
        }
      }, 1000);
    }

    function changeTurn() {
      currentTeam = currentTeam === 1 ? 2 : 1;
      document.getElementById('next-team').textContent = currentTeam;
      showScreen('turn-screen');
    }

    function startTurn() {
      showScreen('game-screen');
      startTimer();
    }

    function checkWinner() {
      if (score1 >= 20) {
        endGame(1);
      } else if (score2 >= 20) {
        endGame(2);
      }
    }

    function endGame(winnerTeam) {
      clearInterval(timer);
      document.getElementById('winner').textContent = winnerTeam;
      showScreen('end-screen');
    }

    function restartGame() {
      score1 = 0;
      score2 = 0;
      currentWordIndex = 0;
      currentTeam = 1;
      updateScoreboard();
      showScreen('start-screen');
    }

    function shuffleWords() {
      for (let i = words.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [words[i], words[j]] = [words[j], words[i]];
      }
    }
  </script>
</body>

</html>